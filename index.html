<!DOCTYPE html>
<html lang="en" manifest="manifest.appcache">
<head>
  <meta charset="utf-8">
  <title>CoffeeScript REPL</title>
  <meta name="viewport" content="width=device-width" />
  <link rel="stylesheet" href="normalize.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>
  <script src="coffee-script.min.js"></script>
  <script src="coffee-repl.js"></script>
  <style>
  body{
    background-color: black;
    color: white;
    font-family: "PT Sans";
  }

  #log{
    width: 98%;
    height: 98%;
    margin: 3px;
    text-wrap: normal;
    white-space: pre-wrap;
    word-break: break-all;
    word-wrap: break-word;
    word-spacing: 0px;
    letter-spacing: 0px;
    line-height: 120%;
  }

  #console-input{
    color: black;
    width: 98%;
    word-spacing: 0px;
    letter-spacing: 0px;
  }
  </style>
</head>
<body>
  <form id="console">
    <pre id="log"></pre>
    <input type="text" id="console-input" placeholder="coffee>" value="" required />
  </form>
  <script>
  var $log = $("#log");
  var $form = $("#console");
  var $input = $("#console-input");
  var repl = new CoffeeScriptREPL();
  $log.append(CoffeeScriptREPL["help"]);

  $form.submit(function(ev){
    var input = $input.val();
    repl.terminal(input, 1);
    $log.append(repl.log+"\n"+repl.buffer);
    $input.val(repl.defaultInput);

    setTimeout(function(){
      $(window).scrollTop(9999999);
      $input.focus();
    }, 100);
    return false;
  });
  </script>
</body>
</html>
